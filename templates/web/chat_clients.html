<body data-theme="light">
  <style>
    body {
      overflow: hidden;
      height: 100vh;
    }
  </style>
  <div class="app-container">
    <!-- Left sidebar - Danh sách nhóm -->
    <aside class="groups-sidebar" id="groupsSidebar">
      <div class="search-bar">
        <input type="text" class="search-input" placeholder="Tìm kiếm" />
      </div>

      <div style="padding: 10px 16px">
        <button
          id="showCreateGroupModalBtn"
          style="
            width: 100%;
            padding: 10px;
            border-radius: 8px;
            border: none;
            background-color: var(--zalo-primary);
            color: white;
            cursor: pointer;
            font-weight: bold;
          "
        >
          <i class="fas fa-plus"></i> Tạo nhóm mới
        </button>
      </div>

            <div class="group-categories">
                <div class="category">
                    <div class="category-title">Nhóm của tôi</div>
                    <div class="group-list" id="groupList">

                        <!-- Load -->
                        <div class="loader-container" style="display: flex; justify-content: center; padding: 20px;">
                        <div class="loader"></div>
                        <!-- Load -->


                        <div class="group-item active">
                            <div class="group-item-avatar">
                                <i class="fas fa-users"></i>
                            </div>
                            <div class="group-item-info">
                                <div class="group-item-name"></div>
                                <div class="group-item-lastmsg"></div>
                            </div>
                            <div class="group-item-meta">
                                <div class="group-item-time"></div>
                                <div class="group-item-unread"></div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </aside>

        <!-- Main Chat Area -->
        <main class="chat-container">
            <header class="chat-header">
                <div class="chat-title">
                    <div class="group-avatar-header">
                        <i class="fas fa-users"></i>
                    </div>
                    <h2></h2>
                </div>
                <div class="chat-actions">
                    <button class="header-btn" title="Tìm kiếm">
                        <i class="fas fa-search"></i>
                    </button>
                    <button class="header-btn" id="toggleGroupsSidebar">
                        <i class="fas fa-bars"></i>
                    </button>
                    <button class="header-btn" id="toggleInfoSidebar">
                        <i class="fas fa-ellipsis-v"></i>
                    </button>
                </div>
            </header>

            <div class="messages-area" id="messagesArea"> </div>

            <div class="input-area">
                <div class="input-tools">
                    <button class="input-tool" id="emojiBtn" title="Biểu tượng cảm xúc">
                        <i class="far fa-smile"></i>
                    </button>
                    <button class="input-tool" id="imageBtn" title="Gửi hình ảnh">
                        <i class="far fa-image"></i>
                    </button>
                    <button class="input-tool" id="fileBtn" title="Gửi tệp đính kèm">
                        <i class="fas fa-paperclip"></i>
                    </button>
                </div>
                <div class="message-input-container">
                    <div id="file-staging-area">
                        </div>
                    <textarea class="message-input" id="messageInput" placeholder="Nhập @, tin nhắn tới Nhóm lập trình Mạng" rows="1"></textarea>
                </div>
                <button class="send-btn" id="sendBtn" title="Gửi tin nhắn" disabled>
                    <i class="fas fa-paper-plane"></i>
                </button>
            </div>

            <input type="file" id="imageInput" accept="image/*" multiple style="display: none;">
            <input type="file" id="fileInput" multiple style="display: none;">

            
        </main>

        <!-- Right sidebar - Thông tin nhóm -->
        <aside class="info-sidebar" id="infoSidebar">
            <div class="group-info-header">
                <div class="group-avatar-large">
                    <i class="fas fa-users"></i>
                </div>
                <div class="group-name-large"></div>
                <div class="group-status-large"></div>
            </div>
            
            <div class="group-tools">
                <button class="group-tool" id="darkModeToggle" title="Chế độ tối">
                    <i class="fas fa-moon"></i>
                </button>
                <button class="group-tool" id="muteBtn" title="Tắt thông báo">
                    <i class="fas fa-bell-slash"></i>
                </button>
                <button class="group-tool" title="Thêm thành viên">
                    <i class="fas fa-user-plus"></i>
                </button>
                <button class="group-tool" title="Quản lí nhóm">
                    <i class="fas fa-cog"></i>
                </button>
            </div>
            
            <div class="info-section">
                <div class="info-section-title">
                    <span>Tệp đã chia sẻ</span>
                </div>
                <div class="file-filter">
                    <div class="filter-tab active" data-type="all">Tất cả</div>
                    <div class="filter-tab" data-type="link">Link</div>
                    <div class="filter-tab" data-type="image">Ảnh</div>
                    <div class="filter-tab" data-type="file">Tệp</div>
                </div>
                <div class="shared-files">
                    <div class="shared-file-item" data-type="link">
                        <div class="file-icon">
                            <i class="fas fa-link"></i>
                        </div>
                        <span class="file-type-badge">Link</span>
                    </div>
                    <div class="shared-file-item" data-type="image">
                        <img src="https://picsum.photos/200/300?random=1" alt="Hình ảnh">
                        <span class="file-type-badge">Ảnh</span>
                    </div>
                    <div class="shared-file-item" data-type="file">
                        <div class="file-icon">
                            <i class="fas fa-file-pdf"></i>
                        </div>
                        <span class="file-type-badge">PDF</span>
                    </div>
                    <div class="shared-file-item" data-type="image">
                        <img src="https://picsum.photos/200/300?random=2" alt="Hình ảnh">
                        <span class="file-type-badge">Ảnh</span>
                    </div>
                    <div class="shared-file-item" data-type="link">
                        <div class="file-icon">
                            <i class="fas fa-link"></i>
                        </div>
                        <span class="file-type-badge">Link</span>
                    </div>
                    <div class="shared-file-item" data-type="file">
                        <div class="file-icon">
                            <i class="fas fa-file-word"></i>
                        </div>
                        <span class="file-type-badge">DOCX</span>
                    </div>
                </div>
            </div>
            
            <div class="info-section">
                <div class="info-section-title">
                    <span>Thành viên đang hoạt động</span>
                </div>
                <div id="member-list">
                </div>
            </div>
        </aside>

    <!-- Context Menus -->
    <div class="context-menu" id="messageContextMenu">
      <button class="context-item">
        <i class="fas fa-download"></i>
        <span>Tải về</span>
      </button>
      <button class="context-item">
        <i class="fas fa-copy"></i>
        <span>Sao chép nội dung</span>
      </button>
      <button class="context-item">
        <i class="fas fa-info-circle"></i>
        <span>Xem chi tiết</span>
      </button>
      <div class="context-divider"></div>
      <button class="context-item">
        <i class="fas fa-trash"></i>
        <span>Thu hồi</span>
      </button>
      <button class="context-item">
        <i class="fas fa-times"></i>
        <span>Xóa phía tôi</span>
      </button>
      <div class="context-divider"></div>
      <button class="context-item">
        <i class="fas fa-thumbtack"></i>
        <span>Ghim tin nhắn</span>
      </button>
      <button class="context-item">
        <i class="fas fa-bookmark"></i>
        <span>Đánh dấu tin nhắn</span>
      </button>
    </div>

    <!-- Context menu cho chế độ im lặng -->
    <div class="context-menu" id="muteContextMenu">
      <button class="context-item" data-time="1">
        <span>1 giờ</span>
      </button>
      <button class="context-item" data-time="2">
        <span>2 giờ</span>
      </button>
      <button class="context-item" data-time="4">
        <span>4 giờ</span>
      </button>
      <button class="context-item" data-time="8">
        <span>8 giờ</span>
      </button>
      <button class="context-item" data-time="24">
        <span>24 giờ</span>
      </button>
      <div class="context-divider"></div>
      <button class="context-item" data-time="custom">
        <i class="fas fa-cog"></i>
        <span>Tùy chỉnh</span>
      </button>
    </div>

    <!-- Image Preview Modal -->
    <div class="modal" id="imageModal">
      <div class="modal-content">
        <button class="modal-close" id="modalClose">
          <i class="fas fa-times"></i>
        </button>
        <img class="modal-image" id="modalImage" src="" alt="" />
      </div>
    </div>

    <!-- Hidden file inputs -->
    <input type="file" id="imageInput" accept="image/*" style="display: none" />
    <input type="file" id="fileInput" style="display: none" />
  </div>
  <!-- Container để chứa các bài viết sẽ được tạo động -->
  <div id="posts-container"></div>

  <div id="auth-overlay" style="display: none">
    <div class="loader"></div>
    <p>No! 'Đăng nhập' trước đê. <br />Để chuyển trang cho...</p>
  </div>

  <div class="app-container"></div>

  <div class="modal" id="createGroupModal">
    <div class="modal-content" style="max-width: 400px">
      <div class="modal-header">
        <h2 class="modal-title">Tạo Nhóm Mới</h2>
        <button class="modal-close" id="closeCreateGroupModal">&times;</button>
      </div>
      <form id="createGroupForm" style="padding: 16px">
        <label for="groupName">Tên nhóm:</label>
        <input
          type="text"
          id="groupName"
          required
          style="width: 100%; padding: 8px; margin-bottom: 10px"
        />
        <label for="groupTopic">Chủ đề (Topic):</label>
        <textarea
          id="groupTopic"
          style="width: 100%; padding: 8px; min-height: 80px"
        ></textarea>
        <button
          type="submit"
          style="
            width: 100%;
            padding: 10px;
            margin-top: 10px;
            border: none;
            background-color: var(--zalo-primary);
            color: white;
            cursor: pointer;
            border-radius: 8px;
          "
        >
          Tạo Nhóm
        </button>
      </form>
    </div>
  </div>

  <script src="/templates/static/js/app-config.js"></script>
  <script src="/templates/static/js/apiService.js"></script>
  <script src="/templates/static/js/chat_clients.js"></script>
</body>
